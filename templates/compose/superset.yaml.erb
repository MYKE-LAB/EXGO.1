version: '3.6'

services:
  superset:
    image: "<%= @utils['images']['superset'] %>"
    restart: always
    volumes:
      - superset_db:/var/lib/superset
    labels:
      - "traefik.http.routers.superset.rule=Host(`superset.<%= @config['app']['domain'] %>`)"
      - "traefik.http.services.superset.loqadbalancer.server.port=8088"
      - "traefik.http.routers.superset.entrypoints=web"
      - "traefik.enable=true"

volumes:
  superset_db:
